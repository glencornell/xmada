#!/bin/sh
##----------------------------------------------------------------------------
##
##  Автоматизированная система организации и управления воздушным движением
##
##----------------------------------------------------------------------------
##! <Copyright>
##!  Copyright (C) 2005  ТехноСерв А/С
##!
##! <Unit> adacompiler.in
##! <Purpose>
##!   Скрипт для запуска компилятора GNAT языка программирования Ada из
##! пакета libtool.
##!
##! <Effects>
##! <ImplementationNotes>
##!   Начальная версия основана на аналогичном модуле из пакета PolyORB.
##!
##! <PortabilityIssues>
##! <AnticipatedChanges>
##----------------------------------------------------------------------------
##  $Revision: 7 $ $Author: godunko $
##  $Date: 2005-03-28 17:35:28 +0400 (Mon, 28 Mar 2005) $
##----------------------------------------------------------------------------

set -e

ADA="@ADA@"
SED="@SED@"

while [ $# -gt 1 ]; do
  cline="$cline$1 "
  shift
done

tmp="tmp$$"
newname=$tmp/`echo $1 | ${SED} -e 's,^\.libs/\(.*\).o$,\1.o,'`

trap "rm -rf $tmp" 0 1 2 3 15
mkdir $tmp

$ADA $cline$newname

mv $newname $1
mv $tmp/* .
